"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[6409],{98286:(e,s,i)=>{i.d(s,{A:()=>l});i(65043);const l=i.p+"static/media/calendor.613e1a8d18ee58be9e0495538c5cfe52.svg"},89764:(e,s,i)=>{i.d(s,{A:()=>l});i(65043);const l=i.p+"static/media/car.10a53caf71a20e3243aadf29a5ffed00.svg"},75684:(e,s,i)=>{i.d(s,{A:()=>l});i(65043);const l=i.p+"static/media/clock.47c071e06e9c56be10a8e704e7dd2f13.svg"},97844:(e,s,i)=>{i.d(s,{A:()=>l});i(65043);const l=i.p+"static/media/map.8e8b7dfa080e46c888eeeff1578fa5e6.svg"},50986:(e,s,i)=>{i.d(s,{A:()=>l});i(65043);const l=i.p+"static/media/placeholderImg.ff52ef0be22bceedde06b99886839af4.svg"},66409:(e,s,i)=>{i.r(s),i.d(s,{default:()=>y});var l=i(65043),a=i(94745),n=i(35475),o=i(53519),t=i(61072),d=i(78602),r=i(50986),c=i(75684),v=i(89764),m=i(98286),u=i(97844),h=i(13892),_=i(73216),p=i(30064),g=i.n(p),x=i(86213),b=i(49954),f=i(70579);const j=()=>(0,f.jsx)("div",{className:"loader-wrapper",children:(0,f.jsx)(b.IN,{visible:!0,height:"96",width:"96",color:"grey",strokeColor:"#4AB9EA",strokeWidth:"5",animationDuration:"0.75",ariaLabel:"rotating-lines-loading",wrapperStyle:{},wrapperClass:""})});var N=i(46978),k=i(8729),C=i(26917);function y(){var e,s,i,p,b,y,A,w;const L=(0,_.zy)(),S=(0,_.Zp)(),{token:E}=(0,k.A)(),[I,D]=(0,l.useState)(!1),[R,T]=(0,l.useState)((null===(e=L.state)||void 0===e?void 0:e.id)||null),[B,F]=(0,l.useState)({}),[O,$]=(0,l.useState)({}),[P,W]=(0,l.useState)({}),[U,G]=(0,l.useState)({}),[H,V]=(0,l.useState)([]),K=(0,h.Wx)({initialValues:{booking_id:R,lesson_date:null===P||void 0===P?void 0:P.lesson_date,lesson_time:null===P||void 0===P?void 0:P.lesson_time},onSubmit:async e=>{try{D(!0);const s=await x.A.post(`https://ready-set-driving-school.pwd.net.au${C.A.LEARNER_RESCHEDULE_BOOKING}`,{booking_id:e.booking_id,lesson_date:e.lesson_date||(null===P||void 0===P?void 0:P.lesson_date),lesson_time:e.lesson_time||(null===P||void 0===P?void 0:P.lesson_time)},{headers:{Authorization:`Bearer ${E}`,"Content-Type":"application/json"}});if(!s||!s.data)throw new Error("Invalid response format");g().fire({icon:"success",title:"Form Submitted Successfully!",text:"Your request has been submitted."})}catch(s){g().fire({icon:"error",title:"Submission Failed",text:s.response.data.data.error||s.response.data.data||"Something went wrong. Please try again later."})}finally{D(!1)}}});(0,l.useEffect)((()=>{if(K.values.lesson_date&&H.length>0){const e=H.find((e=>e.availability_date===K.values.lesson_date));e&&K.setFieldValue("lesson_time",e.availability_start_time)}}),[K.values.lesson_date,H]);const z=async e=>{try{const s=await(0,N.Vg)(`${C.A.TRAINER_AVAILABILTY}/${e}`);if(s.success){const e=s.data.processedAvailabilities.filter((e=>e.lesson_hours===(null===P||void 0===P?void 0:P.lesson_hours)));e.length>0?V(e):console.warn("No matching instructor availability found")}}catch(s){}};return(0,l.useEffect)((()=>{R&&(async()=>{D(!0);try{const e=(0,N.f)(E),s=await e.get(`${C.A.LEARNER_BOOKING_DETAIL}/${R}`),i=await s.data;i.success&&i.data?(D(!1),G(i.data),F(i.data.learners),W(i.data.lesson_details),$(i.data.instructor),i.data.instructor_id?z(i.data.instructor.id):console.error("Unexpected response format:",i)):console.error("Unexpected response format:",i)}catch(e){console.error("Error fetching pricing data:",e)}finally{D(!1)}})()}),[R,E]),(0,l.useEffect)((()=>{var e,s;null!==U&&void 0!==U&&null!==(e=U.instructor)&&void 0!==e&&e.id&&null!==P&&void 0!==P&&P.lesson_hours&&z(null===U||void 0===U||null===(s=U.instructor)||void 0===s?void 0:s.id)}),[null===U||void 0===U||null===(s=U.instructor)||void 0===s?void 0:s.id,null===P||void 0===P?void 0:P.lesson_hours]),(0,f.jsxs)("div",{children:[I&&(0,f.jsx)(j,{}),(0,f.jsxs)("div",{className:"mainContent",children:[(0,f.jsx)(a.A,{}),(0,f.jsx)("div",{className:"mainContent__assets",children:(0,f.jsx)(o.A,{children:(0,f.jsx)(t.A,{children:(0,f.jsx)(d.A,{lg:12,children:(0,f.jsxs)("div",{className:"personalDetailsForm",children:[(0,f.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,f.jsx)("h2",{children:"Reschedule a Booking"}),(0,f.jsxs)("div",{className:"d-flex gap-2",children:[(0,f.jsx)("button",{className:"btn btn-grey-outline rounded-2 btn-sm",onClick:()=>S(-1),children:"X DISCARD CHANGES"}),(0,f.jsx)(n.N_,{to:"/learner/make-another-booking",state:{id:U.instructor_id},className:"btn btn-grey rounded-2 btn-sm",children:"+ PROPOSE NEW BOOKING"})]})]}),(0,f.jsxs)("div",{className:"bookingCard",children:[(0,f.jsx)("div",{className:"bookingCard__top",children:(0,f.jsxs)("h4",{children:["Booking ",null===U||void 0===U?void 0:U.bookingNumber," \xa0",(0,f.jsxs)("div",{class:"badge "+("confirmed"==U.booking_status?"green":"red"),children:[" ",U.booking_status]})]})}),(0,f.jsxs)("div",{className:"bookingCard__mid",children:[(0,f.jsxs)("div",{className:"bookingCard__profileWrp",children:[(0,f.jsxs)("div",{className:"bookingCard__profile",children:[(0,f.jsx)("div",{className:"bookingCard__profileImg",children:(0,f.jsx)("img",{src:(null===O||void 0===O?void 0:O.profile_picture)||r.A,alt:""})}),(0,f.jsxs)("div",{className:"bookingCard__profileInfo",children:[(0,f.jsx)("div",{className:"bookingCard__highlightedText",children:(0,f.jsx)("span",{children:"INSTRUCTOR DETAILS"})}),(0,f.jsxs)("strong",{children:[null===O||void 0===O?void 0:O.first_name," ",null===O||void 0===O?void 0:O.last_name]}),(0,f.jsx)(n.N_,{children:null===O||void 0===O?void 0:O.contact_no})]})]}),(0,f.jsxs)("div",{className:"bookingCard__profile",children:[(0,f.jsx)("div",{className:"bookingCard__profileImg",children:(0,f.jsx)("img",{src:(null===O||void 0===O||null===(i=O.instructor_vehicle)||void 0===i?void 0:i.vehicle_image)||r.A,alt:""})}),(0,f.jsxs)("div",{className:"bookingCard__profileInfo",children:[null===O||void 0===O||null===(p=O.instructor_vehicle)||void 0===p?void 0:p.vehicle_name," ",null===O||void 0===O||null===(b=O.instructor_vehicle)||void 0===b?void 0:b.vehicle_model," ",null===O||void 0===O||null===(y=O.instructor_vehicle)||void 0===y?void 0:y.vehicle_year,(0,f.jsxs)("span",{className:"pdpWrapper__profileCarInfo__ncaprating",children:[(0,f.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,f.jsx)("path",{d:"M5 8.3747L7.42493 9.90932C7.86901 10.1906 8.41243 9.77481 8.29556 9.24901L7.65281 6.36318L9.79727 4.41892C10.1888 4.0643 9.9784 3.39176 9.4642 3.34896L6.64194 3.09829L5.53757 0.371428C5.33891 -0.123809 4.66109 -0.123809 4.46243 0.371428L3.35806 3.09217L0.535797 3.34285C0.021595 3.38565 -0.18876 4.05819 0.202734 4.4128L2.34719 6.35707L1.70444 9.24289C1.58757 9.7687 2.13099 10.1845 2.57507 9.90321L5 8.3747Z",fill:"#FFD53E"})})," \xa0",null===O||void 0===O||null===(A=O.instructor_vehicle)||void 0===A?void 0:A.ancap_rating,"-star ANCAP rating"]}),(0,f.jsx)("span",{class:"pdpWrapper__profileCarInfo__carno",children:null===O||void 0===O||null===(w=O.instructor_vehicle)||void 0===w?void 0:w.vehicle_no}),(0,f.jsx)(n.N_,{children:null===O||void 0===O?void 0:O.contact_no})]})]})]}),(0,f.jsxs)("div",{className:"bookingCard__lessonWrp",children:[(0,f.jsx)("div",{className:"bookingCard__highlightedText",children:(0,f.jsx)("span",{children:"LESSON DETAILS"})}),(0,f.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,f.jsx)("img",{src:c.A,alt:""}),null===P||void 0===P?void 0:P.formatted_date]}),(0,f.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,f.jsx)("img",{src:v.A,alt:""}),(0,f.jsx)("div",{className:"badge",children:null===P||void 0===P?void 0:P.duration_transmission})]}),(0,f.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,f.jsx)("img",{src:m.A,alt:""}),null===P||void 0===P?void 0:P.formatted_time]}),(0,f.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,f.jsx)("img",{src:u.A,alt:""}),null===B||void 0===B?void 0:B.address]})]})]})]}),(0,f.jsxs)("div",{className:"personalDetailsForm__wrp",children:[(0,f.jsx)("div",{className:"personalDetailsForm__top",children:(0,f.jsx)("h4",{children:"Booking "})}),(0,f.jsx)("form",{className:"ProfileForm RegistrationForm",onSubmit:K.handleSubmit,children:(0,f.jsxs)("fieldset",{children:[(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{htmlFor:"learnerName",children:"*Learner Name"}),(0,f.jsx)("input",{type:"text",name:"learnerName",id:"learnerName",className:"form-control",placeholder:"James Smith - 040 313 4567",value:1===B.myself?`${B.first_name} ${B.last_name}`:`${B.learner_first_name} ${B.learner_last_name}`,disabled:!0})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"*Booking Type"}),(0,f.jsxs)("div",{className:"booking-type-options",children:[(0,f.jsx)("button",{type:"button",className:1===(null===P||void 0===P?void 0:P.lesson_hours)?"btn btn-teal":"btn",children:"1-Hour Driving Lesson"}),(0,f.jsx)("button",{type:"button",className:2===(null===P||void 0===P?void 0:P.lesson_hours)?"btn btn-teal":"btn",children:"2-Hour Driving Lesson"}),(0,f.jsx)("button",{type:"button",className:2===(null===P||void 0===P?void 0:P.test_package_id)?"btn btn-teal":"btn",children:"Driving Test Package"})]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"*Lesson Start Time"}),(0,f.jsxs)("div",{className:"row",children:[(0,f.jsx)("div",{className:"col-md-6",children:(0,f.jsxs)("select",{name:"lesson_date",className:"form-control",value:K.values.lesson_date,onChange:K.handleChange,children:[(0,f.jsx)("option",{value:null===P||void 0===P?void 0:P.lesson_date,children:null===P||void 0===P?void 0:P.formatted_date}),null===H||void 0===H?void 0:H.map(((e,s)=>(0,f.jsx)("option",{value:e.availability_date,children:e.formatted_date},s)))]})}),(0,f.jsx)("div",{className:"col-md-6",children:(0,f.jsxs)("select",{name:"lesson_time",className:"form-control",value:K.values.lesson_time,onChange:K.handleChange,children:[(0,f.jsx)("option",{value:null===P||void 0===P?void 0:P.lesson_time,children:null===P||void 0===P?void 0:P.lesson_time}),null===H||void 0===H?void 0:H.filter((e=>e.availability_date===K.values.lesson_date)).map(((e,s)=>(0,f.jsxs)("option",{value:e.availability_start_time,children:[e.availability_start_time," - ",e.availability_end_time]},s)))]})})]})]}),(0,f.jsxs)("div",{className:"form-group",children:[(0,f.jsx)("label",{children:"*Lesson Pick Up Location"}),(0,f.jsx)("div",{className:"location-display position-relative",children:(0,f.jsx)("input",{type:"text",className:"form-control",value:null===B||void 0===B?void 0:B.address,disabled:!0})})]}),(0,f.jsx)("p",{className:"form-note",children:'Booking proposals will "hold" the selected time slot(s) until confirmed by the learner. Proposals remain valid for 24 hours OR proposed booking start time (whichever arrives first).'}),(0,f.jsx)("div",{class:"d-flex justify-content-end personalDetailsForm__btnWrapper gap-4 flex-wrap ",children:(0,f.jsx)("button",{class:"btn btn-teal updateChanges",type:"submit",disabled:I,children:"Change schedule"})})]})})]})]})})})})})]})]})}}}]);
//# sourceMappingURL=6409.d3c7f8a2.chunk.js.map