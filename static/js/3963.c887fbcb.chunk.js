"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[3963],{73963:(e,s,o)=>{o.r(s),o.d(s,{default:()=>g});var l=o(65043),i=o(63401),n=(o(92342),o(94745)),a=o(53519),r=o(61072),t=o(78602),d=o(81140),c=o(46978),u=o(26917),v=o(73216),h=o(8729),_=o(71505),m=o(86213),x=o(63324),b=o(70579);function g(){var e,s,o,g,j,p,f,N,k,w,y,D,A,T,L,I,B,C,H,S,P,R,$,F,E,q,W,O,V;const Y=(0,v.Zp)(),[z,Z]=(0,l.useState)(!0),[K,M]=(0,l.useState)(!1),{learnerBookData:G,setLearnerBookData:J,addressSuburb:Q,setAddressSuburb:U,bookWithNewTrainerID:X,setBookNow:ee,token:se}=(0,h.A)(),[oe,le]=(0,l.useState)([]),[ie,ne]=(0,l.useState)(G.lessonBookingData);(0,l.useEffect)((()=>{}),[G]),(0,l.useEffect)((()=>{(async()=>{try{const s=await(0,c.Vg)(`${u.A.TRAINER_AVAILABILTY}/${X||(null===G||void 0===G?void 0:G.bookWithTrainerID)}`);var e;if(s.success)le(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.processedAvailabilities)}catch(s){}})()}),[null===G||void 0===G?void 0:G.bookWithTrainerID,X]);const[ae,re]=(0,l.useState)(1),[te,de]=(0,l.useState)(),[ce,ue]=(0,l.useState)(),ve=(0,l.useRef)(0);(0,l.useEffect)((()=>{ve.current=G.totalBookHourPrice}),[G.totalBookHourPrice]);const he=async e=>{M(!0);const s={amount:Number(ve.current),address:G.preferred_pickup_address,instructor_id:Number(X||G.bookWithTrainerID),optional_msg_to_your_instructor:G.optional_note_instructor,test_package_price:0,credit_hours_price:Number(0),suburb:G.suburb,state_slug:G.state_slug,postcode:Number(G.postcode),state_name:G.state_name,lesson_details:e||G.lessonBookingData};try{M(!0);const e=await m.A.post(`https://ready-set-driving-school.pwd.net.au${u.A.LEARNER_BOOK_NOW}`,s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${se}`}});if(!e.data.success)return i.oR.error(e.data.message||"Request failed."),void M(!1);{const s=e.data.data;ee(s),Y("/learner/book-lesson")}}catch(l){var o;if(l.response)i.oR.error((null===(o=l.response.data)||void 0===o?void 0:o.data.error)||l.response.statusText||"An error occurred with the request.");else l.request?i.oR.error("No response received from the server. Please try again."):i.oR.error("An unexpected error occurred. Please try again.")}finally{M(!1)}},_e=e=>{re(Number(e.target.value))},me=e=>{ue(e.target.value)};return(0,l.useEffect)((()=>{J((e=>{var s;const o=null===ie||void 0===ie?void 0:ie.reduce(((e,s)=>e+(s.lesson_hours||0)),0),l=(null===(s=e.perHourPriceList.find((e=>e.hours===o)))||void 0===s?void 0:s.price)||0;return{...e,lessonBookingData:null===ie||void 0===ie?void 0:ie.map((e=>({lesson_hours:e.lesson_hours,lesson_date:e.lesson_date,lesson_time:e.lesson_time}))),totalBookHours:o,totalBookHourPrice:l}}))}),[ie]),(0,l.useEffect)((()=>{(async()=>{try{var e;const[s]=await Promise.all([(0,c.Vg)(u.A.PRICES)]);s.success&&null!==(e=s.data)&&void 0!==e&&e.hours_list&&J({...G,perHourPriceList:s.data.hours_list})}catch(s){}})()}),[]),(0,b.jsxs)("div",{children:[(0,b.jsxs)("div",{className:"mainContent learnerDashboard",children:[(0,b.jsx)(n.A,{}),(0,b.jsx)("div",{className:"mainContent__assets",children:(0,b.jsx)(a.A,{children:(0,b.jsx)(r.A,{children:(0,b.jsxs)(t.A,{lg:12,children:[(0,b.jsx)("div",{className:"learnerDashboard__wrp",children:(0,b.jsx)("div",{className:"secIntro",children:(0,b.jsx)("div",{className:"secIntro__left",children:(0,b.jsx)("h2",{children:"Choose Location"})})})}),(0,b.jsxs)("div",{className:"learnerDashboard__wrp",children:[(0,b.jsx)("div",{className:"learnerDashboard__left",children:(0,b.jsx)("div",{className:"bookNow__drivingLession",children:(0,b.jsx)("form",{children:(0,b.jsxs)("div",{className:"bookNow__drivingLessons driving-test-package",children:[(0,b.jsx)("div",{className:"bookNow__drivingLessonsHead d-flex align-items-center",children:(0,b.jsx)("h3",{children:"Driving Lesson 1"})}),(0,b.jsxs)("div",{className:"bookNow__drivingLessonsInner bg-white d-flex flex-column gap-20",children:[(0,b.jsxs)("div",{className:"bookNow__lessonDuration w-100",children:[(0,b.jsx)("label",{htmlFor:"Lesson duration",children:"Lesson duration"}),(0,b.jsxs)("div",{className:"d-flex gap-30",children:[(0,b.jsx)("div",{className:"d-flex gap-10 align-items-center",children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",name:"lessonDuration",value:1,className:1===ae?"active":"",checked:1===ae,required:!0,onChange:_e}),(0,b.jsx)("span",{children:"1 hour"})]})}),(0,b.jsx)("div",{className:"d-flex gap-10 align-items-center",children:(0,b.jsxs)("label",{children:[(0,b.jsx)("input",{type:"radio",name:"lessonDuration",value:2,className:2===ae?"active":"",checked:2===ae,required:!0,onChange:_e}),(0,b.jsx)("span",{children:"2 hours"})]})})]})]}),(0,b.jsxs)("div",{className:"bookNow__times d-flex gap-20 w-100",children:[(0,b.jsxs)("div",{className:"d-flex flex-column col-12 col-sm-6 col-md-6 gap-10",children:[(0,b.jsx)("label",{htmlFor:"Available Dates",children:"Available Dates"}),(0,b.jsxs)("select",{name:"availableDates",id:"",required:!0,onChange:e=>{de(e.target.value)},children:[(0,b.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Date"}),(null===oe||void 0===oe?void 0:oe.filter((e=>e.lesson_hours===Number(ae))).length)>0?null===oe||void 0===oe?void 0:oe.filter((e=>e.lesson_hours===Number(ae))).reduce(((e,s)=>(e.find((e=>e.availability_date===s.availability_date))||e.push(s),e)),[]).map(((e,s)=>(0,b.jsx)("option",{value:e.availability_date,children:e.formatted_date},s))):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("option",{children:"No Date available"})})]})]}),(0,b.jsxs)("div",{className:"d-flex flex-column col-12 col-sm-6 col-md-6 gap-10",children:[(0,b.jsx)("label",{htmlFor:"Available Times",children:"Available Time"}),null!==(null===G||void 0===G?void 0:G.bookWithTrainerID)?(0,b.jsxs)("select",{name:"availableTimes",id:"",required:!0,onChange:me,children:[(0,b.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Time"}),null===oe||void 0===oe?void 0:oe.filter((e=>e.lesson_hours===Number(ae)&&e.availability_date===te)).map(((e,s)=>(0,b.jsxs)("option",{value:e.availability_start_time,children:[e.availability_start_time," - ",e.availability_end_time]},s)))]}):(0,b.jsxs)("select",{name:"availableSlots",id:"",required:!0,onChange:me,children:[(0,b.jsx)("option",{value:"",disabled:!0,selected:!0,children:"Select Time"}),te?null===oe||void 0===oe?void 0:oe.filter((e=>e.lesson_hours===Number(ae)&&e.availability_date===te)).map((e=>{var s;return null===(s=e.slots)||void 0===s?void 0:s.map(((e,s)=>(0,b.jsxs)("option",{value:e.availability_start_time,children:[e.availability_start_time," - ",e.availability_end_time]},s)))})):""]})]})]}),(0,b.jsx)("div",{className:"bookNow__times d-flex gap-20 w-100",children:(0,b.jsx)("label",{children:"Location for Lesson Pickup"})}),(0,b.jsx)("div",{className:"bookNow__times d-flex gap-20 w-100",children:(0,b.jsx)("div",{className:"d-flex flex-column col-12 col-sm-12 col-md-12 gap-10 RegistrationForm__field",children:(0,b.jsx)(_.A,{setAddressSuburb:U,billingAddrs:Q.length>0?`${null===(e=Q[0])||void 0===e?void 0:e.long_name} ${null===(s=Q[1])||void 0===s?void 0:s.long_name} ${null===(o=Q[2])||void 0===o?void 0:o.short_name} ${null===(g=Q[Q.length-3])||void 0===g?void 0:g.long_name} ${null===(j=Q[Q.length-2])||void 0===j?void 0:j.long_name} ${null===(p=Q[Q.length-1])||void 0===p?void 0:p.long_name}`:""})})}),(0,b.jsxs)("div",{className:"bookNow__times d-flex gap-20 w-100",children:[(0,b.jsx)("div",{className:"d-flex flex-column col-12 col-sm-6 col-md-6 gap-10 RegistrationForm__field",children:(0,b.jsx)("input",{type:"text",value:null===(f=Q[1])||void 0===f?void 0:f.long_name})}),(0,b.jsx)("div",{className:"d-flex flex-column col-12 col-sm-6 col-md-6 gap-10 RegistrationForm__field",children:(0,b.jsx)("input",{type:"text",value:null===(N=Q[3])||void 0===N?void 0:N.long_name})})]}),(0,b.jsxs)("div",{className:"d-flex flex-column col-12 col-sm-12 col-md-12 gap-10 RegistrationForm__field",children:[(0,b.jsx)("label",{htmlFor:"Available Dates",children:"Optional message to your Instructor"}),(0,b.jsx)("textarea",{value:G.optional_note_instructor,onChange:e=>J({...G,optional_note_instructor:e.target.value})})]}),(0,b.jsxs)("div",{className:"bookNow__buttons d-flex justify-content-between",children:[(0,b.jsx)("button",{type:"button",className:"btn btn-blue-outline",onClick:()=>{Y(-1),J((e=>({...e,lessonBookingData:[],totalBookHours:0,totalBookHourPrice:0})))},children:"Cancel"}),(0,b.jsx)("button",{type:"button",onClick:()=>{(()=>{if(ie.some((e=>e.lesson_hours===ae&&e.lesson_date===te&&e.lesson_time===ce)))setTimeout((()=>{let e=[...ie,{lesson_hours:ae,lesson_date:te,lesson_time:ce}];he(e)}),200);else{ne([...ie,{lesson_hours:ae,lesson_date:te,lesson_time:ce}]);let e=[...ie,{lesson_hours:ae,lesson_date:te,lesson_time:ce}];setTimeout((()=>{he(e)}),200)}})()},className:"btn btn-blue",abc:"undefined"===ae||"undefined"===te||"undefined"===ce?"abc":"xyz",disabled:!ae||!te||!ce||!G.preferred_pickup_address,children:K?"Validating...":"Continue > "})]})]})]})})})}),(0,b.jsxs)("div",{className:"learnerDashboard__right",children:[(0,b.jsxs)("div",{className:"bookNow__drivingLessons",children:[(0,b.jsx)("div",{className:"bookNow__drivingLessonsHead text-black bg-light-grey",children:(0,b.jsx)("h3",{children:"Your chosen Instructor"})}),(0,b.jsxs)("div",{className:"learnerDashboard__mid",children:[(0,b.jsx)("div",{className:"learnerDashboard__profile",children:(0,b.jsx)("img",{src:(null===G||void 0===G||null===(k=G.bookTrainerInfo)||void 0===k||null===(w=k.profile_details)||void 0===w?void 0:w.profile_picture)||d,alt:""})}),(0,b.jsxs)("div",{className:"learnerDashboard__instructorInfo",children:[(0,b.jsxs)("h4",{children:[null===G||void 0===G||null===(y=G.bookTrainerInfo)||void 0===y?void 0:y.first_name," ",null===G||void 0===G||null===(D=G.bookTrainerInfo)||void 0===D?void 0:D.last_name]}),(0,b.jsxs)("div",{className:"learnerDashboard__profileCarInfo",children:[(0,b.jsx)("img",{src:(null===G||void 0===G||null===(A=G.bookTrainerInfo)||void 0===A||null===(T=A.instructor_vehicle)||void 0===T?void 0:T.vehicle_image)||d,alt:""}),(0,b.jsxs)("div",{className:"learnerDashboard__carInfo",children:[(0,b.jsxs)("p",{children:[null===G||void 0===G||null===(L=G.bookTrainerInfo)||void 0===L||null===(I=L.instructor_vehicle)||void 0===I?void 0:I.make," \xa0",null===G||void 0===G||null===(B=G.bookTrainerInfo)||void 0===B||null===(C=B.instructor_vehicle)||void 0===C?void 0:C.vehicle_model," \xa0",null===G||void 0===G||null===(H=G.bookTrainerInfo)||void 0===H||null===(S=H.instructor_vehicle)||void 0===S?void 0:S.vehicle_year," \xa0 (",null===G||void 0===G||null===(P=G.bookTrainerInfo)||void 0===P?void 0:P.transmission_name," )"]}),(0,b.jsxs)("span",{className:"pdpWrapper__profileCarInfo__ncaprating",children:[(0,b.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,b.jsx)("path",{d:"M5 8.3747L7.42493 9.90932C7.86901 10.1906 8.41243 9.77481 8.29556 9.24901L7.65281 6.36318L9.79727 4.41892C10.1888 4.0643 9.9784 3.39176 9.4642 3.34896L6.64194 3.09829L5.53757 0.371428C5.33891 -0.123809 4.66109 -0.123809 4.46243 0.371428L3.35806 3.09217L0.535797 3.34285C0.021595 3.38565 -0.18876 4.05819 0.202734 4.4128L2.34719 6.35707L1.70444 9.24289C1.58757 9.7687 2.13099 10.1845 2.57507 9.90321L5 8.3747Z",fill:"#FFD53E"})}),"\xa0",null===G||void 0===G||null===(R=G.bookTrainerInfo)||void 0===R||null===($=R.instructor_vehicle)||void 0===$?void 0:$.ancap_rating,"-star ANCAP rating"]}),(0,b.jsx)("span",{className:"pdpWrapper__profileCarInfo__carno",children:null===G||void 0===G||null===(F=G.bookTrainerInfo)||void 0===F||null===(E=F.instructor_vehicle)||void 0===E?void 0:E.vehicle_no})]})]})]})]})]}),(0,b.jsxs)("div",{className:"bookNow__drivingLessons",children:[(0,b.jsx)("div",{className:"bookNow__drivingLessonsHead text-center text-black bg-light-grey",children:(0,b.jsx)("h4",{children:"Your Current Bookings"})}),(0,b.jsx)("div",{className:"bookNow__subTotal bg-white",children:G.lessonBookingData.length>0?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"learnerDashboard__bottom",children:(0,b.jsxs)("div",{className:"learnerDashboard__subTotalrow d-flex justify-content-between align-items-center",children:[(0,b.jsxs)("strong",{children:[null===G||void 0===G||null===(q=G.lessonBookingData)||void 0===q?void 0:q.length," x Driving Lesson",(null===G||void 0===G||null===(W=G.lessonBookingData)||void 0===W?void 0:W.length)>1?"s":""," (",null===G||void 0===G?void 0:G.totalBookHours,"Hour",(null===G||void 0===G?void 0:G.totalBookHours)>1?"s":"",")",(0,b.jsxs)("span",{children:[(0,x.A)(null===G||void 0===G||null===(O=G.lessonBookingData[0])||void 0===O?void 0:O.lesson_date),"\xa0",null===G||void 0===G||null===(V=G.lessonBookingData[0])||void 0===V?void 0:V.lesson_time]})]}),(0,b.jsxs)("p",{children:[" $",null===G||void 0===G?void 0:G.totalBookHourPrice]})]})}),(0,b.jsxs)("div",{className:"font-secondary bookNow__subTotalrow d-flex justify-content-between align-items-center border-dark",children:[(0,b.jsx)("strong",{children:"Subtotal"}),(0,b.jsxs)("strong",{children:["$",null===G||void 0===G?void 0:G.totalBookHourPrice]})]}),(0,b.jsx)("div",{className:"font-secondary border-y-0 learnerDashboard__bottom bg-light-grey border-grey padding-sm",children:(0,b.jsxs)("div",{className:"learnerDashboard__subTotalrow d-flex justify-content-between align-items-center",children:[(0,b.jsx)("span",{className:"p-0",children:"Credit Applied"}),(0,b.jsx)("p",{children:"-$0.00"})]})}),(0,b.jsxs)("div",{className:"font-secondary bookNow__subTotalrow d-flex justify-content-between align-items-center",children:[(0,b.jsx)("h4",{children:"Total Amount"}),(0,b.jsxs)("h4",{children:["$",null===G||void 0===G?void 0:G.totalBookHourPrice]})]})]}):(0,b.jsx)(b.Fragment,{children:(0,b.jsx)("div",{className:"learnerDashboard__bottom",children:(0,b.jsx)("h4",{children:"No lesson confirmed"})})})})]})]})]})]})})})})]}),(0,b.jsx)(i.N9,{})]})}}}]);
//# sourceMappingURL=3963.c887fbcb.chunk.js.map