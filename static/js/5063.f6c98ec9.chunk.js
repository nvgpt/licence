"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[5063],{5934:(e,s,a)=>{a.d(s,{A:()=>r});a(65043);var t=a(73216),l=a(35475),i=a(52943),n=a(70579);function r(){const e=(0,t.zy)().pathname.split("/").filter(Boolean);e[0];"learner-list-details"===e[1]&&e.length>2&&(e[1]="learner-list",e.pop());const s=e.filter((e=>"instructor"!==e)).map(((e,s)=>"dashboard"===e&&0===s?null:e)).filter(Boolean),a=s[s.length-2],r=s[s.length-1];return(0,n.jsx)("div",{className:"breadcrumb",children:(0,n.jsxs)("p",{children:[s.length>0&&(0,n.jsx)(l.N_,{to:"/instructor/dashboard",children:(0,n.jsx)("img",{src:i.A,alt:"Home"})}),a&&(0,n.jsxs)("span",{children:["> \xa0",(0,n.jsxs)(l.N_,{to:`/instructor/${a}`,children:[a.replace(/-/g," ")," "]})]}),r&&(0,n.jsxs)("span",{children:["> \xa0",r.replace(/-/g," ")," "]})]})})}},65063:(e,s,a)=>{a.r(s),a.d(s,{default:()=>x});var t=a(65043),l=a(5934),i=a(35475),n=a(63401),r=(a(92342),a(53519)),o=a(61072),d=a(78602),c=a(73216),m=(a(30064),a(86213),a(86054)),h=a(46978),u=a(8729),v=a(26917),p=a(70579);function x(){const e=(0,c.zy)(),s=(0,c.Zp)(),{userData:a,token:x}=(0,u.A)(),[j,b]=(0,t.useState)(!1),[f,N]=(0,t.useState)([]),[g,_]=(0,t.useState)(),[y,A]=(0,t.useState)(),[k,C]=(0,t.useState)([]),[w,S]=(0,t.useState)(""),[E,O]=(0,t.useState)(""),[R,L]=(0,t.useState)("");(0,t.useEffect)((()=>{(async()=>{b(!0);try{const t=(0,h.f)(x),l=await t.post(v.A.YOUR_LEARNER_STUDENTS),i=await l.data;var s,a;if(i.success&&i.data)b(!1),N(i.data),_((null===(s=e.state)||void 0===s?void 0:s.id)||i.data[0].id),S((null===(a=e.state)||void 0===a?void 0:a.address)||i.data[0].address);else console.error("Unexpected response format:",i)}catch(t){console.error("Error fetching data:",t)}})()}),[]);const B=e=>{A(e)};(0,t.useEffect)((()=>{(async()=>{try{const e=await(0,h.Vg)(`${v.A.TRAINER_AVAILABILTY}/${a.id}`);e.success&&C(e.data.processedAvailabilities.filter((e=>e.lesson_hours===y)))}catch(e){}})()}),[y]),(0,t.useEffect)((()=>{var e,s;O(null===(e=k[0])||void 0===e?void 0:e.availability_date),L(null===(s=k[0])||void 0===s?void 0:s.availability_start_time)}),[k]);return(0,p.jsxs)("div",{children:[j&&(0,p.jsx)(m.A,{}),(0,p.jsxs)("div",{className:"mainContent",children:[(0,p.jsx)(l.A,{}),(0,p.jsx)("div",{className:"mainContent__assets",children:(0,p.jsx)(r.A,{children:(0,p.jsx)(o.A,{children:(0,p.jsx)(d.A,{lg:12,children:(0,p.jsxs)("div",{className:"personalDetailsForm",children:[(0,p.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,p.jsx)("h2",{children:"New Booking Proposal"}),(0,p.jsxs)("div",{className:"d-flex gap-2",children:[(0,p.jsx)("button",{className:"btn btn-grey-outline rounded-2 btn-sm",onClick:()=>s(-1),children:"X CANCEL PROPOSAL"}),(0,p.jsx)(i.N_,{to:"/instructor/NewBooking",className:"btn btn-grey rounded-2 btn-sm",onClick:()=>{n.oR.error("Can't Perform this action")},children:"+ PROPOSE NEW BOOKING"})]})]}),(0,p.jsxs)("div",{className:"personalDetailsForm__wrp",children:[(0,p.jsx)("div",{className:"personalDetailsForm__top",children:(0,p.jsx)("h4",{children:"Booking "})}),(0,p.jsx)("div",{className:"ProfileForm RegistrationForm",children:(0,p.jsxs)("fieldset",{children:[(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{htmlFor:"learnerName",children:"*Learner"}),(0,p.jsx)("select",{className:"form-control",onChange:e=>{const s=e.target.selectedOptions[0].getAttribute("address");_(e.target.value),S(s)},children:null===f||void 0===f?void 0:f.map(((e,s)=>(0,p.jsxs)("option",{value:e.id,address:e.address,selected:e.id===g,children:[e.first_name," ",e.last_name]},e.id)))})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"*Booking Type"}),(0,p.jsxs)("div",{className:"booking-type-options",children:[(0,p.jsx)("button",{type:"button",className:1===y?"btn btn-teal":"btn",onClick:()=>{B(1)},children:"1-Hour Driving Lesson"}),(0,p.jsx)("button",{type:"button",className:2===y?"btn btn-teal":"btn",onClick:()=>{B(2)},children:"2-Hour Driving Lesson"})]})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"*Lesson Start Time"}),(0,p.jsxs)("div",{className:"row",children:[(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("select",{name:"lesson_date",className:"form-control",onChange:e=>{O(e.target.value),L(null===k||void 0===k?void 0:k.filter((s=>s.availability_date===e.target.value))[0].availability_start_time)},children:null===k||void 0===k?void 0:k.map(((e,s)=>(0,p.jsx)("option",{value:e.availability_date,children:e.formatted_date},s)))})}),(0,p.jsx)("div",{className:"col-md-6",children:(0,p.jsx)("select",{name:"lesson_time",className:"form-control",onChange:e=>{L(e.target.value)},children:null===k||void 0===k?void 0:k.filter((e=>e.availability_date===E)).map(((e,s)=>(0,p.jsxs)("option",{value:e.availability_start_time,children:[e.availability_start_time," - ",e.availability_end_time]},s)))})})]})]}),(0,p.jsxs)("div",{className:"form-group",children:[(0,p.jsx)("label",{children:"*Lesson Pick Up Location"}),(0,p.jsx)("div",{className:"location-display position-relative",children:(0,p.jsx)("input",{type:"text",className:"form-control",value:w,disabled:!0})})]}),(0,p.jsx)("p",{className:"form-note",children:'Booking proposals will "hold" the selected time slot(s) until confirmed by the learner. Proposals remain valid for 24 hours OR proposed booking start time (whichever arrives first).'}),(0,p.jsx)("div",{className:"d-flex justify-content-end personalDetailsForm__btnWrapper gap-4 flex-wrap ",children:y&&(0,p.jsx)("button",{className:"btn btn-teal updateChanges",onClick:()=>{n.oR.error("Can't Perform this action")},children:"+ ADD ANOTHER BOOKING"})})]})})]})]})})})})})]}),(0,p.jsx)(n.N9,{})]})}}}]);
//# sourceMappingURL=5063.f6c98ec9.chunk.js.map