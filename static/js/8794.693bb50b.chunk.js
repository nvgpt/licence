"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[8794],{78794:(e,o,s)=>{s.r(o),s.d(o,{default:()=>g});s(65043);var l=s(94745),n=s(53519),i=s(61072),r=s(78602),a=s(81140),d=s(73216),t=s(35475),c=s(46978),h=s(26917),v=s(63401),u=(s(92342),s(30064)),_=s.n(u),b=s(63324),x=s(8729),m=s(70579);function g(){var e,o,s,u,g,j,f,k,N,w,p,C,B,D,L,y,I,A,T,H,P;const{learnerBookData:$,setLearnerBookData:R,learnerCreditHours:M,learnerCreditAmount:W,bookNow:Y}=(0,x.A)(),F=(0,d.Zp)(),Z=()=>{F(-1)};return(0,m.jsxs)("div",{children:[(0,m.jsxs)("div",{className:"mainContent learnerDashboard",children:[(0,m.jsx)(l.A,{}),(0,m.jsx)("div",{className:"mainContent__assets",children:(0,m.jsx)(n.A,{children:(0,m.jsx)(i.A,{children:(0,m.jsxs)(r.A,{lg:12,children:[(0,m.jsx)("div",{className:"learnerDashboard__wrp",children:(0,m.jsx)("div",{className:"secIntro",children:(0,m.jsx)("div",{className:"secIntro__left"})})}),(0,m.jsxs)("div",{className:"learnerDashboard__wrp",children:[(0,m.jsx)("div",{className:"learnerDashboard__left",children:(0,m.jsxs)("div",{className:"bookNow__drivingLession",children:[(0,m.jsx)("h2",{children:"Book Your Lesson"}),(0,m.jsxs)("div",{className:"bookNow__continueWithoutBooking",children:[(0,m.jsx)("div",{className:"d-flex flex-row pt-4 bookNow__continueWithout",children:(0,m.jsx)("div",{className:"d-flex flex-column gap-20 w-100",children:$.lessonBookingData.map(((e,o)=>(0,m.jsxs)("div",{className:"bookNow__lessonRow",children:[(0,m.jsx)("svg",{width:"31",height:"31",viewBox:"0 0 31 31",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.5 0C24.0606 0 31 6.93935 31 15.5C31 24.0606 24.0606 31 15.5 31C6.93935 31 0 24.0606 0 15.5C0 6.93935 6.93935 0 15.5 0ZM3.41775 18.3055C3.96018 20.6342 5.1635 22.7567 6.8831 24.418C8.60271 26.0793 10.7654 27.2088 13.1114 27.6706C12.8123 23.6018 11.4746 21.1606 9.78515 19.8105C8.16695 18.5163 5.97215 18.0156 3.41775 18.3039V18.3055ZM21.2148 19.809C19.5253 21.1621 18.1877 23.6018 17.8885 27.6706C20.2348 27.2087 22.3976 26.079 24.1173 24.4174C25.8369 22.7558 27.0401 20.6329 27.5822 18.3039C25.0278 18.0156 22.833 18.5163 21.2148 19.8105V19.809ZM15.5 3.1C12.6108 3.09949 9.81217 4.10786 7.58727 5.951C5.36238 7.79414 3.85092 10.3563 3.3139 13.1951L3.24725 13.5795L6.67275 12.8945C7.57485 12.7147 8.432 12.2388 9.3899 11.5925L10.1292 11.0779C11.3646 10.2006 13.1952 9.3 15.5 9.3C17.6514 9.3 19.3889 10.0843 20.615 10.9027L21.6101 11.5925C22.4471 12.1582 23.2097 12.5922 23.9909 12.8138L24.3272 12.8945L27.7528 13.5795C27.2949 10.659 25.8087 7.99805 23.5621 6.07656C21.3154 4.15506 18.4563 3.09944 15.5 3.1Z",fill:"#4AB9EA"})}),(0,m.jsxs)("div",{className:"bookNow__lessonDetails w-100 position-relative",children:[(0,m.jsxs)("h4",{children:["Driving Lesson ",o+1,":"]}),(0,m.jsxs)("p",{children:["( ",e.lesson_hours," ) ",(0,b.A)(e.lesson_date)," at ",e.lesson_time]}),(0,m.jsx)("div",{className:"removeRow position-absolute top-0 end-0",onClick:()=>(e=>{var o;let s=[...$.lessonBookingData];s.splice(e,1),R({...$,lessonBookingData:s,totalBookHours:null===s||void 0===s?void 0:s.reduce(((e,o)=>e+(o.lesson_hours||0)),0),totalBookHourPrice:null===(o=$.perHourPriceList.filter(((e,o)=>e.hours===(null===s||void 0===s?void 0:s.reduce(((e,o)=>e+(o.lesson_hours||0)),0))))[0])||void 0===o?void 0:o.price}),s.length<1&&Z()})(o),children:(0,m.jsx)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M1 1L16 16M16 1L1 16",stroke:"#B0B0B0",strokeWidth:"1.5"})})})]})]},o)))})}),(0,m.jsx)("div",{className:"d-flex flex-column pt-4 gap-20",children:(0,m.jsx)("button",{onClick:Z,className:"btn btn-blue w-100",children:" BOOK DRIVING LESSON >"})})]})]})}),(0,m.jsxs)("div",{className:"learnerDashboard__right",children:[(0,m.jsxs)("div",{className:"bookNow__drivingLessons",children:[(0,m.jsx)("div",{className:"bookNow__drivingLessonsHead text-black bg-light-grey",children:(0,m.jsx)("h3",{children:"Your chosen Instructor"})}),(0,m.jsxs)("div",{className:"learnerDashboard__mid",children:[(0,m.jsx)("div",{className:"learnerDashboard__profile",children:(0,m.jsx)("img",{src:(null===$||void 0===$||null===(e=$.bookTrainerInfo)||void 0===e||null===(o=e.profile_details)||void 0===o?void 0:o.profile_picture)||a,alt:""})}),(0,m.jsxs)("div",{className:"learnerDashboard__instructorInfo",children:[(0,m.jsxs)("h4",{children:[null===$||void 0===$||null===(s=$.bookTrainerInfo)||void 0===s?void 0:s.first_name," ",null===$||void 0===$||null===(u=$.bookTrainerInfo)||void 0===u?void 0:u.last_name]}),(0,m.jsxs)("div",{className:"learnerDashboard__profileCarInfo",children:[(0,m.jsx)("img",{src:(null===$||void 0===$||null===(g=$.bookTrainerInfo)||void 0===g||null===(j=g.instructor_vehicle)||void 0===j?void 0:j.vehicle_image)||a,alt:""}),(0,m.jsxs)("div",{className:"learnerDashboard__carInfo",children:[(0,m.jsxs)("p",{children:[null===$||void 0===$||null===(f=$.bookTrainerInfo)||void 0===f||null===(k=f.instructor_vehicle)||void 0===k?void 0:k.make," \xa0",null===$||void 0===$||null===(N=$.bookTrainerInfo)||void 0===N||null===(w=N.instructor_vehicle)||void 0===w?void 0:w.vehicle_model," \xa0",null===$||void 0===$||null===(p=$.bookTrainerInfo)||void 0===p||null===(C=p.instructor_vehicle)||void 0===C?void 0:C.vehicle_year," \xa0 (",null===$||void 0===$||null===(B=$.bookTrainerInfo)||void 0===B?void 0:B.transmission_name," )"]}),(0,m.jsxs)("span",{className:"pdpWrapper__profileCarInfo__ncaprating",children:[(0,m.jsx)("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,m.jsx)("path",{d:"M5 8.3747L7.42493 9.90932C7.86901 10.1906 8.41243 9.77481 8.29556 9.24901L7.65281 6.36318L9.79727 4.41892C10.1888 4.0643 9.9784 3.39176 9.4642 3.34896L6.64194 3.09829L5.53757 0.371428C5.33891 -0.123809 4.66109 -0.123809 4.46243 0.371428L3.35806 3.09217L0.535797 3.34285C0.021595 3.38565 -0.18876 4.05819 0.202734 4.4128L2.34719 6.35707L1.70444 9.24289C1.58757 9.7687 2.13099 10.1845 2.57507 9.90321L5 8.3747Z",fill:"#FFD53E"})}),"\xa0",null===$||void 0===$||null===(D=$.bookTrainerInfo)||void 0===D||null===(L=D.instructor_vehicle)||void 0===L?void 0:L.ancap_rating,"-star ANCAP rating"]}),(0,m.jsx)("span",{className:"pdpWrapper__profileCarInfo__carno",children:null===$||void 0===$||null===(y=$.bookTrainerInfo)||void 0===y||null===(I=y.instructor_vehicle)||void 0===I?void 0:I.vehicle_no})]})]})]})]})]}),(0,m.jsxs)("div",{className:"bookNow__drivingLessons",children:[(0,m.jsx)("div",{className:"bookNow__drivingLessonsHead text-center text-black bg-light-grey",children:(0,m.jsx)("h4",{children:"Your Current Bookings"})}),(0,m.jsx)("div",{className:"bookNow__subTotal bg-white",children:$.lessonBookingData.length>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"learnerDashboard__bottom",children:(0,m.jsxs)("div",{className:"learnerDashboard__subTotalrow d-flex justify-content-between align-items-center",children:[(0,m.jsxs)("strong",{children:[null===$||void 0===$||null===(A=$.lessonBookingData)||void 0===A?void 0:A.length," x Driving Lesson",(null===$||void 0===$||null===(T=$.lessonBookingData)||void 0===T?void 0:T.length)>1?"s":""," (",null===$||void 0===$?void 0:$.totalBookHours,"Hour",(null===$||void 0===$?void 0:$.totalBookHours)>1?"s":"",")",(0,m.jsxs)("span",{children:[(0,b.A)(null===$||void 0===$||null===(H=$.lessonBookingData[0])||void 0===H?void 0:H.lesson_date),"\xa0",null===$||void 0===$||null===(P=$.lessonBookingData[0])||void 0===P?void 0:P.lesson_time]})]}),(0,m.jsxs)("p",{children:[" $",null===$||void 0===$?void 0:$.totalBookHourPrice]})]})}),(0,m.jsxs)("div",{className:"font-secondary bookNow__subTotalrow d-flex justify-content-between align-items-center border-dark",children:[(0,m.jsx)("strong",{children:"Subtotal"}),(0,m.jsxs)("strong",{children:["$",null===$||void 0===$?void 0:$.totalBookHourPrice]})]}),M>0?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"font-secondary border-y-0 learnerDashboard__bottom padding-sm",style:{backgroundColor:"#4ab9ea",color:"#fff"},children:(0,m.jsxs)("div",{className:" d-flex justify-content-between align-items-center",children:[(0,m.jsx)("span",{className:"p-0",children:"Credit Amount"}),(0,m.jsxs)("p",{children:["$",W]})]})}),(0,m.jsxs)("div",{className:"font-secondary bookNow__subTotalrow d-flex justify-content-between align-items-center",children:[(0,m.jsx)("h4",{children:"Total Credit Left"}),(0,m.jsx)("h4",{children:W-(null===$||void 0===$?void 0:$.totalBookHourPrice)>=0?`$${W-(null===$||void 0===$?void 0:$.totalBookHourPrice)}.00`:`-$${-(W-(null===$||void 0===$?void 0:$.totalBookHourPrice))}.00`})]}),(0,m.jsx)("button",{onClick:async()=>{if(W-(null===$||void 0===$?void 0:$.totalBookHourPrice)<0)v.oR.error("Your don't have enough credit hours, Remove Any Booked Lesson");else{const o=Math.floor(9e9*Math.random())+1e9;try{const e=await(0,c.$P)(h.A.PAYNOW,{payment_status:!0,billing_name:"",billing_address:"",billing_suburb_id:"",billing_state_id:"",bookingNumber:o,learner_token:Y.learner_token,billing_suburb:$.suburb,billing_state_slug:$.state_slug,billing_state_name:$.state_name,billing_postcode:Number($.postcode)});console.log(e),e.success?_().fire({title:"Payment Successful!",text:"Your payment was successful.",html:`Your booking id is <b>${o}</b>`,icon:"success",timer:4e3,showConfirmButton:!1}).then((()=>{window.location.href="/learner/dashboard"})):v.oR.error(`${e}`)}catch(e){console.error("Payment submission error:",e)}}},className:"btn btn-green",style:{width:"100%",maxWidth:"100%",borderRadius:"0px"},children:"Confirm Booking"})]}):(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"font-secondary border-y-0 learnerDashboard__bottom bg-light-grey border-grey padding-sm",children:(0,m.jsxs)("div",{className:"learnerDashboard__subTotalrow d-flex justify-content-between align-items-center",children:[(0,m.jsx)("span",{className:"p-0",children:"Credit Applied"}),(0,m.jsx)("p",{children:"$0.00"})]})}),(0,m.jsxs)("div",{className:"font-secondary bookNow__subTotalrow d-flex justify-content-between align-items-center",children:[(0,m.jsx)("h4",{children:"Total Amount"}),(0,m.jsxs)("h4",{children:["$",null===$||void 0===$?void 0:$.totalBookHourPrice]})]}),(0,m.jsx)(t.N_,{to:"/learner/book-now",className:"btn btn-blue",style:{width:"100%",maxWidth:"100%",borderRadius:"0px"},children:"Proceed to Payment"})]})]}):(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"learnerDashboard__bottom",children:(0,m.jsx)("h4",{children:"No lesson confirmed"})})})})]})]})]})]})})})})]}),(0,m.jsx)(v.N9,{})]})}}}]);
//# sourceMappingURL=8794.693bb50b.chunk.js.map