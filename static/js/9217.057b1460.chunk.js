"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[9217],{49217:(e,s,r)=>{r.r(s),r.d(s,{default:()=>v});var o=r(65043),n=r(53519),i=r(61072),a=r(78602),t=r(3233),l=r(33975),d=r(13892),c=r(80899),p=r(73216),u=r(35475),m=(r(46978),r(26917)),f=r(30064),h=r.n(f),x=r(86213),g=r(70579);const w=()=>(0,g.jsxs)("div",{className:"LoginFormWrp__left",children:[(0,g.jsx)("img",{src:t,alt:"Login Side"}),(0,g.jsx)("div",{className:"LoginFormWrp__logo",children:(0,g.jsx)("img",{src:l.A,alt:"logo"})})]});function v(){const e=(0,p.Zp)(),[s,r]=(0,o.useState)(!1),[t,l]=(0,o.useState)(),[f,v]=(0,o.useState)(),j=()=>{const[e]=(0,u.ok)(),s=e.get("token"),[r,o]=s?s.split("|"):["",""];l(s),v(o)},_=(0,d.Wx)({enableReinitialize:!0,initialValues:{password:"",password_confirmation:""},validationSchema:c.Ik({password:c.Yj().required("Password is required"),password_confirmation:c.Yj().required("Confirm Password is required").oneOf([c.KR("password"),null],"Passwords must match")}),onSubmit:async s=>{const o={password:s.password,password_confirmation:s.password_confirmation,token:t};try{r(!0);const s=await x.A.post(`https://ready-set-driving-school.pwd.net.au${m.A.RESET_PASSWORD}`,o,{headers:{"Content-Type":"application/json"}});if(console.log("API Response:",s.data.message),!s.data.success)return void h().fire({icon:"error",title:"Invalid Token",text:'"Invalid Token"',confirmButtonText:"Try Again"});h().fire({icon:"success",title:"Success!",text:`${s.data.message}!`,confirmButtonText:"Try Login now"}).then((()=>{e("instructor"===f?"/instructor-login":"/learner-login")}))}catch(l){var n,i;if(console.error("API call error:",l.response.data.message),l.response)h().fire({icon:"error",title:"Invalid Response",text:(null===l||void 0===l||null===(n=l.response)||void 0===n||null===(i=n.data)||void 0===i?void 0:i.message)||l.response.statusText||"An error occurred with the request.",confirmButtonText:"Try Again"});else if(l.request){var a;h().fire({icon:"error",title:"Invalid Response",text:(null===(a=l.request.data)||void 0===a?void 0:a.data.error)||l.response.statusText||"No response received from the server. Please try again.",confirmButtonText:"Try Again"})}else h().fire({icon:"error",title:"Invalid Response",text:"An unexpected error occurred. Please try again.",confirmButtonText:"Try Again"})}finally{r(!1)}}});return(0,g.jsx)(n.A,{children:(0,g.jsx)(i.A,{children:(0,g.jsx)(a.A,{lg:12,children:(0,g.jsxs)("div",{className:"LoginFormWrp d-flex",children:[(0,g.jsx)(w,{}),(0,g.jsxs)("div",{className:"LoginFormWrp__right",children:[(0,g.jsx)("h2",{children:"Reset Password"}),(0,g.jsx)(j,{}),(0,g.jsxs)("form",{className:"LoginFormWrp__form d-flex flex-column",onSubmit:_.handleSubmit,children:[(0,g.jsxs)("div",{className:"RegistrationForm__field",children:[(0,g.jsx)("label",{htmlFor:"*Password",style:{letterSpacing:"1px",fontWeight:"300"},children:"*Password"}),(0,g.jsx)("input",{type:"password",name:"password",id:"password",value:_.values.password,style:{border:"1px solid #fff"},onChange:_.handleChange,onBlur:_.handleBlur}),_.touched.password&&_.errors.password&&(0,g.jsx)("div",{style:{color:"red",marginTop:"0px"},children:_.errors.password})]}),(0,g.jsxs)("div",{className:"RegistrationForm__field",children:[(0,g.jsx)("label",{htmlFor:"*Password",style:{letterSpacing:"1px",fontWeight:"300"},children:"*Re enter Password"}),(0,g.jsx)("input",{type:"password",name:"password_confirmation",id:"password_confirmation",value:_.values.password_confirmation,style:{border:"1px solid #fff"},onChange:_.handleChange,onBlur:_.handleBlur}),_.touched.password_confirmation&&_.errors.password_confirmation&&(0,g.jsx)("div",{style:{color:"red",marginTop:"0px"},children:_.errors.password_confirmation})]}),(0,g.jsx)("div",{className:"d-flex flex-column gap-3 LoginFormWrp__btnWrp",children:(0,g.jsx)("button",{type:"submit",className:"btn btn-white has-hover-blue",disabled:s,children:s?"Updating...":"Update >"})})]})]})]})})})})}},3233:(e,s,r)=>{e.exports=r.p+"static/media/loginSide.e65e72656fea30affec7.png"}}]);
//# sourceMappingURL=9217.057b1460.chunk.js.map