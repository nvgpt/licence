"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[8342],{98286:(e,s,i)=>{i.d(s,{A:()=>a});i(65043);const a=i.p+"static/media/calendor.613e1a8d18ee58be9e0495538c5cfe52.svg"},89764:(e,s,i)=>{i.d(s,{A:()=>a});i(65043);const a=i.p+"static/media/car.10a53caf71a20e3243aadf29a5ffed00.svg"},75684:(e,s,i)=>{i.d(s,{A:()=>a});i(65043);const a=i.p+"static/media/clock.47c071e06e9c56be10a8e704e7dd2f13.svg"},97844:(e,s,i)=>{i.d(s,{A:()=>a});i(65043);const a=i.p+"static/media/map.8e8b7dfa080e46c888eeeff1578fa5e6.svg"},50986:(e,s,i)=>{i.d(s,{A:()=>a});i(65043);const a=i.p+"static/media/placeholderImg.ff52ef0be22bceedde06b99886839af4.svg"},5934:(e,s,i)=>{i.d(s,{A:()=>t});i(65043);var a=i(73216),l=i(35475),n=i(52943),o=i(70579);function t(){const e=(0,a.zy)().pathname.split("/").filter(Boolean);e[0];"learner-list-details"===e[1]&&e.length>2&&(e[1]="learner-list",e.pop());const s=e.filter((e=>"instructor"!==e)).map(((e,s)=>"dashboard"===e&&0===s?null:e)).filter(Boolean),i=s[s.length-2],t=s[s.length-1];return(0,o.jsx)("div",{className:"breadcrumb",children:(0,o.jsxs)("p",{children:[s.length>0&&(0,o.jsx)(l.N_,{to:"/instructor/dashboard",children:(0,o.jsx)("img",{src:n.A,alt:"Home"})}),i&&(0,o.jsxs)("span",{children:["> \xa0",(0,o.jsxs)(l.N_,{to:`/instructor/${i}`,children:[i.replace(/-/g," ")," "]})]}),t&&(0,o.jsxs)("span",{children:["> \xa0",t.replace(/-/g," ")," "]})]})})}},68342:(e,s,i)=>{i.r(s),i.d(s,{default:()=>y});var a=i(65043),l=i(5934),n=i(35475),o=i(53519),t=i(61072),d=i(78602),r=i(50986),c=i(75684),m=i(89764),h=i(98286),u=i(97844),v=i(13892),_=i(73216),p=i(30064),x=i.n(p),b=i(86213),g=i(86054),f=i(46978),j=i(8729),N=i(26917),k=i(70579);function y(){var e;const s=(0,_.zy)(),i=(0,_.Zp)(),{token:p}=(0,j.A)(),[y,A]=(0,a.useState)(!1),[C,S]=(0,a.useState)((null===(e=s.state)||void 0===e?void 0:e.id)||null),[w,E]=(0,a.useState)({}),[D,$]=(0,a.useState)({}),[I,L]=(0,a.useState)({}),[B,T]=(0,a.useState)([]),F=(0,v.Wx)({initialValues:{booking_id:C,lesson_date:null===D||void 0===D?void 0:D.lesson_date,lesson_time:null===D||void 0===D?void 0:D.lesson_time},onSubmit:async e=>{try{A(!0);const s=await b.A.post(`https://ready-set-driving-school.pwd.net.au/${N.A.RESCHEDULE_BOOKING}`,{booking_id:e.booking_id,lesson_date:e.lesson_date||(null===D||void 0===D?void 0:D.lesson_date),lesson_time:e.lesson_time||(null===D||void 0===D?void 0:D.lesson_time)},{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(!s||!s.data)throw new Error("Invalid response format");x().fire({icon:"success",title:"Form Submitted Successfully!",text:"Your request has been submitted."})}catch(s){x().fire({icon:"error",title:"Submission Failed",text:s.message||"Something went wrong. Please try again later."})}finally{A(!1)}}});(0,a.useEffect)((()=>{if(F.values.lesson_date&&B.length>0){const e=B.find((e=>e.availability_date===F.values.lesson_date));e&&F.setFieldValue("lesson_time",e.availability_start_time)}}),[F.values.lesson_date,B]);const O=async e=>{try{const s=await(0,f.Vg)(`${N.A.TRAINER_AVAILABILTY}/${e}`);if(s.success){const e=s.data.processedAvailabilities.filter((e=>e.lesson_hours===(null===D||void 0===D?void 0:D.lesson_hours)));e.length>0?T(e):console.warn("No matching trainer availability found")}}catch(s){}};return(0,a.useEffect)((()=>{C&&(async()=>{A(!0);try{const e=(0,f.f)(p),s=await e.get(`${N.A.BOOKING_DETAIL}/${C}`),i=await s.data;i.success&&i.data?(A(!1),L(i.data),E(i.data.learners),$(i.data.lesson_details),i.data.instructor_id?O(i.data.instructor_id):console.error("Unexpected response format:",i)):console.error("Unexpected response format:",i)}catch(e){console.error("Error fetching pricing data:",e)}finally{A(!1)}})()}),[C,p]),(0,a.useEffect)((()=>{null!==I&&void 0!==I&&I.instructor_id&&null!==D&&void 0!==D&&D.lesson_hours&&O(null===I||void 0===I?void 0:I.instructor_id)}),[null===I||void 0===I?void 0:I.instructor_id,null===D||void 0===D?void 0:D.lesson_hours]),(0,k.jsxs)("div",{children:[y&&(0,k.jsx)(g.A,{}),(0,k.jsxs)("div",{className:"mainContent",children:[(0,k.jsx)(l.A,{}),(0,k.jsx)("div",{className:"mainContent__assets",children:(0,k.jsx)(o.A,{children:(0,k.jsx)(t.A,{children:(0,k.jsx)(d.A,{lg:12,children:(0,k.jsxs)("div",{className:"personalDetailsForm",children:[(0,k.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,k.jsx)("h2",{children:"Reschedule a Booking"}),(0,k.jsxs)("div",{className:"d-flex gap-2",children:[(0,k.jsx)("button",{className:"btn btn-grey-outline rounded-2 btn-sm",onClick:()=>i(-1),children:"X DISCARD CHANGES"}),(0,k.jsx)(n.N_,{to:"/instructor/NewBooking",className:"btn btn-grey rounded-2 btn-sm",children:"+ PROPOSE NEW BOOKING"})]})]}),(0,k.jsxs)("div",{className:"bookingCard",children:[(0,k.jsx)("div",{className:"bookingCard__top",children:(0,k.jsxs)("h4",{children:["Booking ",null===I||void 0===I?void 0:I.bookingNumber," \xa0",(0,k.jsxs)("div",{class:"badge "+("confirmed"==I.booking_status?"green":"red"),children:[" ",I.booking_status]})]})}),(0,k.jsxs)("div",{className:"bookingCard__mid",children:[(0,k.jsx)("div",{className:"bookingCard__profileWrp",children:(0,k.jsxs)("div",{className:"bookingCard__profile",children:[(0,k.jsx)("div",{className:"bookingCard__profileImg",children:(0,k.jsx)("img",{src:w.profile_picture||r.A,alt:""})}),(0,k.jsxs)("div",{className:"bookingCard__profileInfo",children:[(0,k.jsx)("div",{className:"bookingCard__highlightedText",children:(0,k.jsx)("span",{children:"LEARNER DETAILS"})}),(0,k.jsx)("strong",{children:1===w.myself?`${w.first_name} ${w.last_name}`:`${w.learner_first_name} ${w.learner_last_name}`}),(0,k.jsx)(n.N_,{children:1===w.myself?`${w.phone_no}`:`${w.learner_phone_no}`})]})]})}),(0,k.jsxs)("div",{className:"bookingCard__lessonWrp",children:[(0,k.jsx)("div",{className:"bookingCard__highlightedText",children:(0,k.jsx)("span",{children:"LESSON DETAILS"})}),(0,k.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,k.jsx)("img",{src:c.A,alt:""}),null===D||void 0===D?void 0:D.formatted_date]}),(0,k.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,k.jsx)("img",{src:m.A,alt:""}),(0,k.jsx)("div",{className:"badge",children:null===D||void 0===D?void 0:D.duration_transmission})]}),(0,k.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,k.jsx)("img",{src:h.A,alt:""}),null===D||void 0===D?void 0:D.formatted_time]}),(0,k.jsxs)("div",{className:"bookingCard__lessonDetails",children:[(0,k.jsx)("img",{src:u.A,alt:""}),null===w||void 0===w?void 0:w.address]})]})]})]}),(0,k.jsxs)("div",{className:"personalDetailsForm__wrp",children:[(0,k.jsx)("div",{className:"personalDetailsForm__top",children:(0,k.jsx)("h4",{children:"Booking "})}),(0,k.jsx)("form",{className:"ProfileForm RegistrationForm",onSubmit:F.handleSubmit,children:(0,k.jsxs)("fieldset",{children:[(0,k.jsxs)("div",{className:"form-group",children:[(0,k.jsx)("label",{htmlFor:"learnerName",children:"*Learner Name"}),(0,k.jsx)("input",{type:"text",name:"learnerName",id:"learnerName",className:"form-control",placeholder:"James Smith - 040 313 4567",value:1===w.myself?`${w.first_name} ${w.last_name}`:`${w.learner_first_name} ${w.learner_last_name}`,disabled:!0})]}),(0,k.jsxs)("div",{className:"form-group",children:[(0,k.jsx)("label",{children:"*Booking Type"}),(0,k.jsxs)("div",{className:"booking-type-options",children:[1===(null===D||void 0===D?void 0:D.lesson_hours)&&(0,k.jsx)("button",{type:"button",className:1===(null===D||void 0===D?void 0:D.lesson_hours)?"btn btn-teal":"btn",children:"1-Hour Driving Lesson"}),2===(null===D||void 0===D?void 0:D.lesson_hours)&&(0,k.jsx)("button",{type:"button",className:2===(null===D||void 0===D?void 0:D.lesson_hours)?"btn btn-teal":"btn",children:"2-Hour Driving Lesson"}),2===(null===D||void 0===D?void 0:D.test_package_id)&&(0,k.jsx)("button",{type:"button",className:2===(null===D||void 0===D?void 0:D.test_package_id)?"btn btn-teal":"btn",children:"Driving Test Package"})]})]}),(0,k.jsxs)("div",{className:"form-group",children:[(0,k.jsx)("label",{children:"*Lesson Start Time"}),(0,k.jsxs)("div",{className:"row",children:[(0,k.jsx)("div",{className:"col-md-6",children:(0,k.jsxs)("select",{name:"lesson_date",className:"form-control",value:F.values.lesson_date,onChange:F.handleChange,children:[(0,k.jsx)("option",{value:null===D||void 0===D?void 0:D.lesson_date,children:null===D||void 0===D?void 0:D.formatted_date}),null===B||void 0===B?void 0:B.map(((e,s)=>(0,k.jsx)("option",{value:e.availability_date,children:e.formatted_date},s)))]})}),(0,k.jsx)("div",{className:"col-md-6",children:(0,k.jsxs)("select",{name:"lesson_time",className:"form-control",value:F.values.lesson_time,onChange:F.handleChange,children:[(0,k.jsx)("option",{value:null===D||void 0===D?void 0:D.lesson_time,disabled:!0,selected:!0,children:null===D||void 0===D?void 0:D.lesson_time}),null===B||void 0===B?void 0:B.filter((e=>e.availability_date===F.values.lesson_date)).map(((e,s)=>(0,k.jsxs)("option",{value:e.availability_start_time,children:[e.availability_start_time," - ",e.availability_end_time]},s)))]})})]})]}),(0,k.jsxs)("div",{className:"form-group",children:[(0,k.jsx)("label",{children:"*Lesson Pick Up Location"}),(0,k.jsx)("div",{className:"location-display position-relative",children:(0,k.jsx)("input",{type:"text",className:"form-control",value:null===w||void 0===w?void 0:w.address,disabled:!0})})]}),(0,k.jsx)("p",{className:"form-note",children:'Booking proposals will "hold" the selected time slot(s) until confirmed by the learner. Proposals remain valid for 24 hours OR proposed booking start time (whichever arrives first).'}),(0,k.jsx)("div",{class:"d-flex justify-content-end personalDetailsForm__btnWrapper gap-4 flex-wrap ",children:(0,k.jsx)("button",{class:"btn btn-teal updateChanges",type:"submit",disabled:y,children:"Change schedule"})})]})})]})]})})})})})]})]})}}}]);
//# sourceMappingURL=8342.e502da5b.chunk.js.map