"use strict";(self.webpackChunklicencenow=self.webpackChunklicencenow||[]).push([[3889],{5934:(e,s,r)=>{r.d(s,{A:()=>l});r(65043);var a=r(73216),i=r(35475),n=r(52943),d=r(70579);function l(){const e=(0,a.zy)().pathname.split("/").filter(Boolean);e[0];"learner-list-details"===e[1]&&e.length>2&&(e[1]="learner-list",e.pop());const s=e.filter((e=>"instructor"!==e)).map(((e,s)=>"dashboard"===e&&0===s?null:e)).filter(Boolean),r=s[s.length-2],l=s[s.length-1];return(0,d.jsx)("div",{className:"breadcrumb",children:(0,d.jsxs)("p",{children:[s.length>0&&(0,d.jsx)(i.N_,{to:"/instructor/dashboard",children:(0,d.jsx)("img",{src:n.A,alt:"Home"})}),r&&(0,d.jsxs)("span",{children:["> \xa0",(0,d.jsxs)(i.N_,{to:`/instructor/${r}`,children:[r.replace(/-/g," ")," "]})]}),l&&(0,d.jsxs)("span",{children:["> \xa0",l.replace(/-/g," ")," "]})]})})}},3889:(e,s,r)=>{r.r(s),r.d(s,{default:()=>f});var a=r(65043),i=r(5934),n=r(53519),d=r(61072),l=r(78602),o=r(73216),t=r(35475),c=r(13892),m=r(80899),p=r(30064),_=r.n(p),h=r(86213),j=r(26917),x=r(8729),u=r(70579);function f(){const[e,s]=(0,a.useState)(!1),[r,p]=(0,a.useState)(""),{userData:f,token:w,setNewProfileName:v}=(0,x.A)(),[N,g]=(0,a.useState)(!1),[b,F]=(0,a.useState)(),y=(0,o.Zp)();(0,a.useEffect)((()=>{(async()=>{g(!0);try{const e=await h.A.get(`https://ready-set-driving-school.pwd.net.au${j.A.VIEW_PERSONAL_DETAILS}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});e.data.success&&(g(!1),F(e.data.data))}catch(e){}finally{g(!1)}})()}),[]);const D=m.Ik().shape({first_name:m.Yj().required("First Name is required"),last_name:m.Yj().required("Last Name is required"),gender_id:m.Yj().required("Gender is required"),phone_no:m.Yj().required("Phone number is required").matches(/^[0-9\s\-]+$/,"Phone number must only contain digits, spaces, or hyphens"),email:m.Yj().email("Invalid email").required("Email is required"),postcode:m.Yj().matches(/^\d+$/,"Postcode must be digits only").required("Postcode is required"),confirm_model_pswd:m.Yj().required("Password is required")}),A=m.Ik().shape({old_password:m.Yj().required("Old Password is required"),new_password:m.Yj().min(5,"Password must be at least 6 characters"),confirm_password:m.Yj().oneOf([m.KR("new_password"),null],"Passwords must match").required("Confirm New Password is required")});return(0,u.jsx)("div",{children:(0,u.jsxs)("div",{className:"mainContent",children:[(0,u.jsx)(i.A,{}),(0,u.jsx)("div",{className:"mainContent__assets",children:(0,u.jsx)(n.A,{children:(0,u.jsx)(d.A,{children:(0,u.jsx)(l.A,{lg:12,children:(0,u.jsxs)("div",{className:"personalDetailsForm",children:[(0,u.jsx)(t.N_,{onClick:()=>y(-1),children:"< Go back "}),(0,u.jsx)("h2",{children:"Personal Details"}),(0,u.jsxs)("div",{className:"personalDetailsForm__wrp",children:[(0,u.jsxs)("div",{className:"personalDetailsForm__top",children:[" ",(0,u.jsx)("h4",{children:"Personal Info"})," "]}),(0,u.jsx)(c.l1,{enableReinitialize:!0,initialValues:{first_name:(null===b||void 0===b?void 0:b.first_name)||"",preferred_first_name:(null===b||void 0===b?void 0:b.preferred_first_name)||"",last_name:(null===b||void 0===b?void 0:b.last_name)||"",gender_id:(null===b||void 0===b?void 0:b.gender_id)||0,phone_no:(null===b||void 0===b?void 0:b.phone_no)||"",email:(null===b||void 0===b?void 0:b.email)||"",postcode:(null===b||void 0===b?void 0:b.postcode)||"",confirmation:"yes",confirm_model_pswd:(null===b||void 0===b?void 0:b.confirm_model_pswd)||""},validationSchema:D,onSubmit:async(e,r)=>{let{setSubmitting:a}=r;g(!0);try{const r={...e,button_type:"update_changes"},a=await h.A.post(`https://ready-set-driving-school.pwd.net.au${j.A.UPDATE_PERSONAL_DETAILS}`,r,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});a.data.success?(s(!1),_().fire("Success!",`${a.data.message}`,"success"),v(e.first_name),sessionStorage.setItem("profileName",e.first_name)):(s(!1),_().fire("Error!",`${a.data.message}`,"error"))}catch(i){_().fire("Error!",`${i.response.data.data.errors}`,"error")}finally{g(!1),a(!1)}},children:r=>{let{errors:a,touched:i}=r;return(0,u.jsx)("div",{className:"PersonalDetailsForm",children:(0,u.jsxs)(c.lV,{className:"RegistrationForm",children:[(0,u.jsxs)("fieldset",{className:"pb-0",children:[(0,u.jsxs)("div",{className:"RegistrationForm__group",children:[(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"first_name",children:"*First Name "}),(0,u.jsx)(c.D0,{type:"text",name:"first_name",id:"first_name"}),a.first_name&&i.first_name&&(0,u.jsx)("div",{className:"error",children:a.first_name})]}),(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"preferred_first_name",children:" Preferred First Name "}),(0,u.jsx)(c.D0,{type:"text",name:"preferred_first_name",id:"preferred_first_name"}),a.preferred_first_name&&i.preferred_first_name&&(0,u.jsx)("div",{className:"error",children:a.preferred_first_name})]})]}),(0,u.jsxs)("div",{className:"RegistrationForm__group",children:[(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"last_name",children:"*Last Name"}),(0,u.jsx)(c.D0,{type:"text",name:"last_name",id:"last_name"}),a.last_name&&i.last_name&&(0,u.jsx)("div",{className:"error",children:a.last_name})]}),(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"gender_id",children:"*Gender"}),(0,u.jsxs)(c.D0,{as:"select",name:"gender_id",id:"gender_id",children:[(0,u.jsx)("option",{disabled:!0,value:"0",children:"Select Gender"}),(0,u.jsx)("option",{value:"1",children:"Female"}),(0,u.jsx)("option",{value:"2",children:"Male"}),(0,u.jsx)("option",{value:"3",children:"Other"})]}),a.gender&&i.gender&&(0,u.jsx)("div",{className:"error",children:a.gender_id})]})]}),(0,u.jsxs)("div",{className:"RegistrationForm__group",children:[(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"phone_no",children:"*Phone Number"}),(0,u.jsx)(c.D0,{type:"text",name:"phone_no",id:"phone_no"}),a.phone_no&&i.phone_no&&(0,u.jsx)("div",{className:"error",children:a.phone_no})]}),(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"email",children:"*Email"}),(0,u.jsx)(c.D0,{type:"email",name:"email",id:"email"}),a.email&&i.email&&(0,u.jsx)("div",{className:"error",children:a.email})]})]}),(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"postcode",children:"*Postcode"}),(0,u.jsx)(c.D0,{type:"text",name:"postcode",id:"postcode"}),a.postcode&&i.postcode&&(0,u.jsx)("div",{className:"error",children:a.postcode})]}),(0,u.jsx)("div",{className:"d-flex justify-content-end personalDetailsForm__btnWrapper gap-4 flex-wrap ",children:(0,u.jsx)("button",{className:"btn btn-teal updateChanges",onClick:()=>s(!0),type:"button",children:"Update Changes"})})]}),e&&(0,u.jsx)("div",{className:"popup",children:(0,u.jsx)(n.A,{children:(0,u.jsx)(d.A,{children:(0,u.jsx)(l.A,{lg:12,children:(0,u.jsxs)("div",{className:"popup__wrp personalDetailsForm__wrp",children:[(0,u.jsxs)("div",{className:"personalDetailsForm__top text-center position-relative",children:[(0,u.jsx)("h4",{children:"Are you sure?"}),(0,u.jsx)("button",{type:"button",className:"popup__close",onClick:()=>s(!1),children:" X"})]}),(0,u.jsxs)("div",{className:"personalDetailsForm__bottom",children:[(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"confirm_model_pswd",children:" Confirm Password to Update Changes "}),(0,u.jsx)(c.D0,{type:"password",name:"confirm_model_pswd",id:"confirm_model_pswd"}),a.confirm_model_pswd&&i.confirm_model_pswd&&(0,u.jsx)("div",{className:"error",children:a.confirm_model_pswd})]}),(0,u.jsx)("div",{className:"d-flex justify-content-center",children:(0,u.jsx)("button",{className:"btn btn-teal",type:"submit",disabled:N,children:" Confirm"})})]})]})})})})})]})})}}),(0,u.jsx)(c.l1,{enableReinitialize:!0,initialValues:{old_password:(null===b||void 0===b?void 0:b.old_password)||"",new_password:(null===b||void 0===b?void 0:b.new_password)||"",confirm_password:(null===b||void 0===b?void 0:b.confirm_password)||""},validationSchema:A,onSubmit:async(e,s)=>{let{setSubmitting:r}=s;g(!0);try{const s={...e,button_type:"change_password"},r=await h.A.post(`https://ready-set-driving-school.pwd.net.au${j.A.UPDATE_PERSONAL_DETAILS}`,s,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});r.data.success?_().fire("Success!",`${r.data.message}`,"success"):_().fire("Error!",`${r.data.message}`,"error")}catch(a){_().fire("Error!",`${a.response.data.message}`,"error")}finally{g(!1),r(!1)}},children:e=>{let{errors:s,touched:r}=e;return(0,u.jsx)("div",{className:"PersonalDetailsForm",children:(0,u.jsxs)(c.lV,{className:"RegistrationForm",children:[(0,u.jsx)("div",{className:"personalDetailsForm__top",children:(0,u.jsx)("h4",{children:"Change Password"})}),(0,u.jsxs)("fieldset",{className:"pb-0",children:[(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"old_password",children:"   *Old Password  "}),(0,u.jsx)(c.D0,{type:"password",name:"old_password",id:"old_password"}),s.old_password&&r.old_password&&(0,u.jsx)("div",{className:"error",children:s.old_password})]}),(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"new_password",children:" *New Password  "}),(0,u.jsx)(c.D0,{type:"password",name:"new_password",id:"new_password"}),s.new_password&&r.new_password&&(0,u.jsx)("div",{className:"error",children:s.new_password})]}),(0,u.jsxs)("div",{className:"RegistrationForm__field",children:[(0,u.jsx)("label",{htmlFor:"confirm_password",children:" *Confirm New Password"}),(0,u.jsx)(c.D0,{type:"password",name:"confirm_password",id:"confirm_password"}),s.confirm_password&&r.confirm_password&&(0,u.jsx)("div",{className:"error",children:s.confirm_password})]}),(0,u.jsx)("div",{className:"d-flex justify-content-end personalDetailsForm__btnWrapper gap-4 flex-wrap",children:(0,u.jsx)("button",{type:"change_password",className:"btn btn-teal",disabled:N,children:" Change Password "})})]})]})})}})]})]})})})})})]})})}}}]);
//# sourceMappingURL=3889.b6bcf29b.chunk.js.map